import org.json.JSONObject;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;


public class getRaces {
    public static void main(String[] args) {

        String[] season = {"2017", "2016", "1966", "1950"};
        System.out.println("| season | numberOfCircuits |");
        for(String x: season){
            try {
                int checkData = Integer.parseInt(x);
                assert true;
                identifyInput(x);
            } catch (Exception e) {
                assert false;
            }
        }
    }

    public static void identifyInput(String inp) {
        String url = "http://ergast.com/api/f1/" + inp + ".json";

        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(url))
                .build();

        try {
            HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
            JSONObject json = new JSONObject(response.body());
            int numRaces = json.getJSONObject("MRData").getJSONObject("RaceTable").getJSONArray("Races").length();
            Object raceDetails = json.getJSONObject("MRData").getJSONObject("RaceTable").getJSONArray("Races");

            System.out.println("| " + inp + " | " + numRaces + " |");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
